{
  "consumer": {
    "name": "af-commerce-billing-history"
  },
  "provider": {
    "name": "accounts-receivable"
  },
  "interactions": [
    {
      "description": "Request to fetch invoices: GET /api/v1/invoices -> 200: GET /api/v1/invoices -> 200",
      "providerState": "I've a valid TXA id",
      "request": {
        "method": "GET",
        "path": "/api/v1/invoices",
        "query": "convertAmount=true",
        "headers": {
          "x-transaction-account": "TXA_ID",
          "authorization": "bearer dummy"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "content-type": "application/json"
        },
        "body": {
          "data": [
            {
              "id": "1-second-invoice-id",
              "invoiceGroup": "ig-ramen-rule-world",
              "number": "E4C17EB2-0002",
              "status": "PAID",
              "createdAt": 1592549444000,
              "finalizedAt": 1592549444000,
              "dueAt": 1592549444000,
              "paidAt": 1592549444000,
              "billTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "shipTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "paymentMethod": "visa-payment-method-id",
              "currency": "USD",
              "subtotal": 10000,
              "total": 120.03,
              "tax": 2000,
              "items": [

              ]
            },
            {
              "id": "fourth-invoice-id",
              "invoiceGroup": "ig-ramen-rule-world",
              "number": "E4C17EB2-0004",
              "status": "OPEN",
              "createdAt": 1592463044000,
              "finalizedAt": 1592549444000,
              "dueAt": 1592463044000,
              "paidAt": null,
              "billTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "shipTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "paymentMethod": "visa-payment-method-id",
              "currency": "USD",
              "subtotal": 80000,
              "total": 96000,
              "tax": 1600,
              "items": [
                {
                  "id": "an-inoice-item-id",
                  "description": "Jira Software Monthly Charge",
                  "period": {
                    "startAt": 1578614400000,
                    "endAt": 1581292800000
                  },
                  "subtotal": 80000,
                  "total": 96000,
                  "unitAmount": 10,
                  "tax": 1600,
                  "taxPercent": 10,
                  "currency": "USD",
                  "quantity": 2
                }
              ]
            },
            {
              "id": "2-first-invoice-id",
              "invoiceGroup": "ig-ramen-rule-world",
              "number": "E4C17EB2-0001",
              "status": "PAID",
              "createdAt": 1592463044000,
              "finalizedAt": 1592549444000,
              "dueAt": 1592463044000,
              "paidAt": 1592549444000,
              "billTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "shipTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "paymentMethod": "visa-payment-method-id",
              "currency": "USD",
              "subtotal": 0,
              "total": 0,
              "tax": 0,
              "items": [

              ]
            }
          ],
          "min": "2-first-invoice-id",
          "max": "fourth-invoice-id"
        }
      }
    },
    {
      "description": "Request to fetch invoice matching id: GET /api/v1/invoices/fourth-invoice-id -> 200: GET /api/v1/invoices/fourth-invoice-id -> 200",
      "providerState": "I've a valid TXA id",
      "request": {
        "method": "GET",
        "path": "/api/v1/invoices/fourth-invoice-id",
        "query": "",
        "headers": {
          "x-transaction-account": "TXA_ID",
          "authorization": "bearer dummy"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "content-type": "application/json"
        },
        "body": {
          "id": "fourth-invoice-id",
          "invoiceGroup": "ig-ramen-rule-world",
          "number": "E4C17EB2-0004",
          "status": "OPEN",
          "createdAt": 1592463044000,
          "finalizedAt": 1592549444000,
          "dueAt": 1592463044000,
          "paidAt": null,
          "billTo": {
            "name": "Atlassian",
            "postalAddress": {
              "country": "AU",
              "city": "Sydney",
              "line1": "Level 6",
              "line2": "341 George St",
              "state": "NSW",
              "postcode": "2000"
            },
            "taxId": "ABN-12345"
          },
          "shipTo": {
            "name": "Atlassian",
            "postalAddress": {
              "country": "AU",
              "city": "Sydney",
              "line1": "Level 6",
              "line2": "341 George St",
              "state": "NSW",
              "postcode": "2000"
            },
            "taxId": "ABN-12345"
          },
          "paymentMethod": "visa-payment-method-id",
          "currency": "USD",
          "subtotal": 80000,
          "total": 96000,
          "tax": 1600,
          "items": [
            {
              "id": "an-inoice-item-id",
              "description": "Jira Software Monthly Charge",
              "period": {
                "startAt": 1578614400000,
                "endAt": 1581292800000
              },
              "subtotal": 80000,
              "total": 96000,
              "unitAmount": 10,
              "tax": 1600,
              "taxPercent": 10,
              "currency": "USD",
              "quantity": 2
            }
          ]
        }
      }
    },
    {
      "description": "Request to fetch invoices after given invoice: GET /api/v1/invoices -> 200: GET /api/v1/invoices -> 200",
      "providerState": "I've a valid TXA id",
      "request": {
        "method": "GET",
        "path": "/api/v1/invoices",
        "query": "after=1-second-invoice-id&convertAmount=true",
        "headers": {
          "x-transaction-account": "TXA_ID",
          "authorization": "bearer dummy"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "content-type": "application/json"
        },
        "body": {
          "data": [
            {
              "id": "thrid-invoice-id",
              "invoiceGroup": "ig-ramen-rule-world",
              "number": "E4C17EB2-0003",
              "status": "PAID",
              "createdAt": 1592463044000,
              "finalizedAt": 1592549444000,
              "dueAt": 1592463044000,
              "paidAt": 1592549444000,
              "billTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "shipTo": {
                "name": "Atlassian",
                "postalAddress": {
                  "country": "AU",
                  "city": "Sydney",
                  "line1": "Level 6",
                  "line2": "341 George St",
                  "state": "NSW",
                  "postcode": "2000"
                },
                "taxId": "ABN-12345"
              },
              "paymentMethod": "visa-payment-method-id",
              "currency": "USD",
              "subtotal": 80000,
              "total": 960.12,
              "tax": 1600,
              "items": [

              ]
            }
          ],
          "min": "thrid-invoice-id",
          "max": "fourth-invoice-id"
        }
      }
    },
    {
      "description": "Request to fetch empty invoices: GET /api/v1/invoices -> 200: GET /api/v1/invoices -> 200",
      "providerState": "I've a valid TXA id",
      "request": {
        "method": "GET",
        "path": "/api/v1/invoices",
        "query": "convertAmount=true",
        "headers": {
          "x-transaction-account": "TXA_ID",
          "authorization": "bearer dummy"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "content-type": "application/json"
        },
        "body": {
          "data": [

          ]
        }
      }
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "2.0.0"
    }
  }
}