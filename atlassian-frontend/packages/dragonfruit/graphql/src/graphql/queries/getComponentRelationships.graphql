query getComponentRelationships($id: ID!, $outwardRelationshipsQuery: CompassRelationshipQuery!, $inwardRelationshipsQuery: CompassRelationshipQuery!) {
  compass {
    component(id: $id) {
      __typename

      ... on CompassComponent {
        ...CompassComponentCore

        # We query for this to determine if the component is externally managed or not
        dataManager {
          ecosystemAppId
          externalSourceURL
        }

        outwardRelationships: relationships(query: $outwardRelationshipsQuery) {
          __typename
          ... on CompassRelationshipConnection {
            nodes {
              ...CompassRelationshipInRelationshipView
            }
          }
          ... on QueryError {
            message
            extensions {
              statusCode
              errorType
            }
          }
        }

        inwardRelationships: relationships(query: $inwardRelationshipsQuery) {
          __typename
          ... on CompassRelationshipConnection {
            nodes {
              ...CompassRelationshipInRelationshipView
            }
          }
          ... on QueryError {
            message
            extensions {
              statusCode
              errorType
            }
          }
        }
      }

      ... on QueryError {
        message
        extensions {
          statusCode
          errorType
        }
      }
    }
  }
}

