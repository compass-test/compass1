name: design system docs proxy
description: Reverse proxy for atlassian.design to the design-system-docs, as aliasing the micros static service is not possible.
organization: UI Platform

notifications:
  email: eng-design-system@atlassian.com
links:
  binary:
    name: dummy
    tag: 'latest'
    type: docker
  source:
    url: https://bitbucket.org/atlassian/atlassian-frontend

environmentOverrides:
  prod-east:
    resources:
      - type: globaledge
        name: ingress
        attributes:
          domain:
            - atlassian.design
            - www.atlassian.design
          upstream_address:
            - address: design-system-docs.us-east-1.prod.public.atl-paas.net
              region: us-east-1
          upstream_suffix: s3
          upstream_sni: design-system-docs.us-east-1.prod.public.atl-paas.net
          routes:
            # redirect www.atlassian.design to atlassian.design
            - match:
                prefix: /
                host: www.atlassian.design
              redirect:
                host_redirect: atlassian.design
            # root host_rewrite rule
            - match:
                prefix: /
              route:
                host_rewrite: design-system-docs.us-east-1.prod.public.atl-paas.net
  stg-east:
    resources:
      - type: globaledge
        name: ingress
        attributes:
          domain:
            - staging.atlassian.design
            - www.staging.atlassian.design
          upstream_address:
            - address: design-system-docs.us-east-1.staging.public.atl-paas.net
              region: us-east-1
          upstream_suffix: s3
          upstream_sni: design-system-docs.us-east-1.staging.public.atl-paas.net
          routes:
            # redirect www.staging.atlassian.design to staging.atlassian.design
            - match:
                prefix: /
                host: www.staging.atlassian.design
              redirect:
                host_redirect: staging.atlassian.design
            # root host_rewrite rule
            - match:
                prefix: /
              route:
                host_rewrite: design-system-docs.us-east-1.staging.public.atl-paas.net

computeClassification:
  dataType:
    - None # Ec2 isn't utilized

alarms:
  overrides:
    # Because this service has no backing EC2 instance(s) we turn these alarms off.
    HealthyHostCount: null
    UnHealthyHostCount: null
    ManyUnHealthyHostCount: null
    LowSeverityAlarmWhenTooManyBackend5xxErrors: null
    HighSeverityAlarmWhenTooManyBackend5xxErrors: null
